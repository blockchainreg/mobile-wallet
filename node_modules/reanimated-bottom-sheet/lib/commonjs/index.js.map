{"version":3,"sources":["index.tsx"],"names":["Dimensions","get","screenHeight","height","P","android","ios","Platform","OS","magic","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","deceleration","bouncyFactor","velocityFactor","toss","coefForTranslatingVelocities","set","Animated","cond","onChange","block","eq","greaterOrEq","sqrt","not","defined","max","add","and","Value","spring","or","divide","greaterThan","sub","event","diff","multiply","clockRunning","startClock","stopClock","decay","Clock","lessThan","runDecay","clock","value","velocity","wasStartedFromBegin","state","finished","position","time","config","withPreservingAdditiveOffset","drag","prev","valWithPreservedOffset","GestureState","BEGAN","withDecaying","decayClock","prevent","valDecayed","offset","END","ACTIVE","BottomSheetBehavior","props","panState","tapState","panMasterState","masterVelocity","isManuallySetValue","manuallySetValue","masterClockForOverscroll","preventDecaying","dragMasterY","dragY","handleMasterPan","nativeEvent","translationY","velocityY","handlePan","enabledInnerScrolling","handleTap","snapTo","index","enabledImperativeSnapping","setValue","snapPoints","propsToNewIndices","handleLayoutHeader","heightOfHeader","layout","heightOfHeaderAnimated","setState","handleFullHeader","handleLayoutContent","heightOfContent","initSnap","panRef","innerGestureHandlerRefs","master","tapRef","getDerivedStateFromProps","undefined","init","middlesOfSnapPoints","i","length","push","masterOffseted","tossForMaster","springConfig","hasOwnProperty","destinationPoint","currentSnapPoint","snapPoint","masterClock","prevMasterDrag","wasRun","translateMaster","runSpring","overdragResistanceFactor","Y","withEnhancedLimits","dest","isManuallySet","toValue","val","wasRunMaster","min","limitedVal","diffPres","flagWasRunSpring","justEndedIfEnded","wasEndedMasterAfterInner","prevMaster","prevState","rev","width","zIndex","opacity","transform","translateY","enabledGestureInteraction","simultaneousHandlers","renderHeader","overflow","renderContent","callbackNode","contentPosition","headerPosition","sortedPropsSnapPints","map","s","ind","renumber","Error","sort","a","b","forEach","p","initialSnap","React","Component","defaultProps","createRef","str","Number","split"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { Dimensions, Platform, View, LayoutChangeEvent } from 'react-native'\nimport Animated from 'react-native-reanimated'\nimport {\n  PanGestureHandler,\n  TapGestureHandler,\n  State as GestureState,\n} from 'react-native-gesture-handler'\n\ntype Props = {\n  /**\n   * Points for snapping of bottom sheet component. They define distance from bottom of the screen.\n   * Might be number or percent (as string e.g. '20%') for points or percents of screen height from bottom.\n   */\n  snapPoints: (number | string)[]\n\n  /**\n   * Determines initial snap point of bottom sheet. Defaults to 0.\n   */\n  initialSnap: number\n\n  /**\n   * Method for rendering scrollable content of bottom sheet.\n   */\n  renderContent?: () => React.ReactNode\n\n  /**\n   * Method for rendering non-scrollable header of bottom sheet.\n   */\n  renderHeader?: () => React.ReactNode\n\n  /**\n   * Defines if bottom sheet could be scrollable by gesture. Defaults to true.\n   */\n  enabledGestureInteraction?: boolean\n\n  /**\n   * If false blocks snapping using snapTo method. Defaults to true.\n   */\n  enabledManualSnapping?: boolean\n\n  /**\n   * Defines whether it's possible to scroll inner content of bottom sheet. Defaults to true.\n   */\n  enabledInnerScrolling?: boolean\n\n  /**\n   * Reanimated node which holds position of bottom sheet, where 1 it the highest snap point and 0 is the lowest.\n   */\n  callbackNode?: Animated.Value<number>\n\n  /**\n   * Reanimated node which holds position of bottom sheet;s content (in dp).\n   */\n  contentPosition?: Animated.Value<number>\n\n  /**\n   * Reanimated node which holds position of bottom sheet's header (in dp).\n   */\n  headerPosition?: Animated.Value<number>\n\n  /**\n   * Defines how violently sheet has to stopped while overdragging. 0 means no overdrag. Defaults to 0.\n   */\n  overdragResistanceFactor: number\n\n  /**\n   * Array of Refs passed to gesture handlers for simultaneous event handling\n   */\n  simultaneousHandlers?: Array<React.RefObject<any>> | React.RefObject<any>\n\n  /**\n   * Overrides config for spring animation\n   */\n  springConfig: {\n    damping?: number\n    mass?: number\n    stiffness?: number\n    restSpeedThreshold?: number\n    restDisplacementThreshold?: number\n    toss?: number\n  }\n\n  /**\n   * Refs for gesture handlers used for building bottomsheet\n   */\n  innerGestureHandlerRefs: [\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<TapGestureHandler>\n  ]\n\n  enabledImperativeSnapping?: boolean\n}\n\ntype State = {\n  snapPoints: Animated.Value<number>[]\n  init: any\n  initSnap: number\n  propsToNewIndices: { [key: string]: number }\n  heightOfContent: Animated.Value<number>\n  heightOfHeader: number\n  heightOfHeaderAnimated: Animated.Value<number>\n}\n\nconst { height: screenHeight } = Dimensions.get('window')\n\nconst P = <T extends any>(android: T, ios: T): T =>\n  Platform.OS === 'ios' ? ios : android\n\nconst magic = {\n  damping: 50,\n  mass: 0.3,\n  stiffness: 121.6,\n  overshootClamping: true,\n  restSpeedThreshold: 0.3,\n  restDisplacementThreshold: 0.3,\n  deceleration: 0.999,\n  bouncyFactor: 1,\n  velocityFactor: P(1, 0.8),\n  toss: 0.4,\n  coefForTranslatingVelocities: 5,\n}\n\nconst {\n  damping,\n  mass,\n  stiffness,\n  overshootClamping,\n  restSpeedThreshold,\n  restDisplacementThreshold,\n  deceleration,\n  velocityFactor,\n  toss,\n} = magic\n\nconst {\n  set,\n  cond,\n  onChange,\n  block,\n  eq,\n  greaterOrEq,\n  sqrt,\n  not,\n  defined,\n  max,\n  add,\n  and,\n  Value,\n  spring,\n  or,\n  divide,\n  greaterThan,\n  sub,\n  event,\n  diff,\n  multiply,\n  clockRunning,\n  startClock,\n  stopClock,\n  decay,\n  Clock,\n  lessThan,\n} = Animated\n\nfunction runDecay(\n  clock: Animated.Clock,\n  value: Animated.Node<number>,\n  velocity: Animated.Node<number>,\n  wasStartedFromBegin: Animated.Value<number>\n) {\n  const state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  }\n\n  const config = { deceleration }\n\n  return [\n    cond(clockRunning(clock), 0, [\n      cond(wasStartedFromBegin, 0, [\n        set(wasStartedFromBegin, 1),\n        set(state.finished, 0),\n        set(state.velocity, multiply(velocity, velocityFactor)),\n        set(state.position, value),\n        set(state.time, 0),\n        startClock(clock),\n      ]),\n    ]),\n    cond(clockRunning(clock), decay(clock, state, config)),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]\n}\n\nfunction withPreservingAdditiveOffset(\n  drag: Animated.Node<number>,\n  state: Animated.Node<number>\n) {\n  const prev = new Value(0)\n  const valWithPreservedOffset = new Value(0)\n  return block([\n    cond(\n      eq(state, GestureState.BEGAN),\n      [set(prev, 0)],\n      [\n        set(\n          valWithPreservedOffset,\n          add(valWithPreservedOffset, sub(drag, prev))\n        ),\n        set(prev, drag),\n      ]\n    ),\n    valWithPreservedOffset,\n  ])\n}\n\nfunction withDecaying(\n  drag: Animated.Node<number>,\n  state: Animated.Node<number>,\n  decayClock: Animated.Clock,\n  velocity: Animated.Node<number>,\n  prevent: Animated.Value<number>\n) {\n  const valDecayed = new Value(0)\n  const offset = new Value(0)\n  // since there might be moar than one clock\n  const wasStartedFromBegin = new Value(0)\n  return block([\n    cond(\n      eq(state, GestureState.END),\n      [\n        cond(\n          prevent,\n          stopClock(decayClock),\n          set(\n            valDecayed,\n            runDecay(\n              decayClock,\n              add(drag, offset),\n              velocity,\n              wasStartedFromBegin\n            )\n          )\n        ),\n      ],\n      [\n        stopClock(decayClock),\n        cond(eq(state, GestureState.BEGAN), set(prevent, 0)),\n        cond(\n          or(eq(state, GestureState.BEGAN), eq(state, GestureState.ACTIVE)),\n          set(wasStartedFromBegin, 0)\n        ),\n        cond(eq(state, GestureState.BEGAN), [\n          set(offset, sub(valDecayed, drag)),\n        ]),\n        set(valDecayed, add(drag, offset)),\n      ]\n    ),\n    valDecayed,\n  ])\n}\n\nexport default class BottomSheetBehavior extends React.Component<Props, State> {\n  static defaultProps = {\n    overdragResistanceFactor: 0,\n    initialSnap: 0,\n    enabledImperativeSnapping: true,\n    enabledGestureInteraction: true,\n    enabledInnerScrolling: true,\n    springConfig: {},\n    innerGestureHandlerRefs: [\n      React.createRef(),\n      React.createRef(),\n      React.createRef(),\n    ],\n  }\n\n  private decayClock = new Clock()\n  private panState = new Value(0)\n  private tapState = new Value(0)\n  private velocity = new Value(0)\n  private panMasterState = new Value(GestureState.END)\n  private masterVelocity = new Value(0)\n  private isManuallySetValue: Animated.Value<number> = new Value(0)\n  private manuallySetValue = new Value(0)\n  private masterClockForOverscroll = new Clock()\n  private preventDecaying: Animated.Value<number> = new Value(0)\n  private dragMasterY = new Value(0)\n  private dragY = new Value(0)\n  private translateMaster: Animated.Node<number>\n  private panRef: React.RefObject<PanGestureHandler>\n  private master: React.RefObject<PanGestureHandler>\n  private tapRef: React.RefObject<TapGestureHandler>\n  private snapPoint: Animated.Node<number>\n  private Y: Animated.Node<number>\n\n  constructor(props: Props) {\n    super(props)\n\n    this.panRef = props.innerGestureHandlerRefs[0]\n    this.master = props.innerGestureHandlerRefs[1]\n    this.tapRef = props.innerGestureHandlerRefs[2]\n    this.state = BottomSheetBehavior.getDerivedStateFromProps(props, undefined)\n\n    const { snapPoints, init } = this.state\n    const middlesOfSnapPoints: Animated.Node<number>[] = []\n    for (let i = 1; i < snapPoints.length; i++) {\n      middlesOfSnapPoints.push(divide(add(snapPoints[i - 1], snapPoints[i]), 2))\n    }\n    const masterOffseted = new Value(init)\n    // destination point is a approximation of movement if finger released\n    const tossForMaster =\n      props.springConfig.hasOwnProperty('toss') &&\n      props.springConfig.toss != undefined\n        ? props.springConfig.toss\n        : toss\n    const destinationPoint = add(\n      masterOffseted,\n      multiply(tossForMaster, this.masterVelocity)\n    )\n    // method for generating condition for finding the nearest snap point\n    const currentSnapPoint = (i = 0): Animated.Node<number> =>\n      i + 1 === snapPoints.length\n        ? snapPoints[i]\n        : cond(\n            lessThan(destinationPoint, middlesOfSnapPoints[i]),\n            snapPoints[i],\n            currentSnapPoint(i + 1)\n          )\n    // current snap point desired\n    this.snapPoint = currentSnapPoint()\n\n    const masterClock = new Clock()\n    const prevMasterDrag = new Value(0)\n    const wasRun: Animated.Value<number> = new Value(0)\n    this.translateMaster = block([\n      cond(\n        eq(this.panMasterState, GestureState.END),\n        [\n          set(prevMasterDrag, 0),\n          cond(\n            or(clockRunning(masterClock), not(wasRun), this.isManuallySetValue),\n            [\n              cond(this.isManuallySetValue, stopClock(masterClock)),\n              set(\n                masterOffseted,\n                this.runSpring(\n                  masterClock,\n                  masterOffseted,\n                  this.masterVelocity,\n                  cond(\n                    this.isManuallySetValue,\n                    this.manuallySetValue,\n                    this.snapPoint\n                  ),\n                  wasRun,\n                  this.isManuallySetValue\n                )\n              ),\n              set(this.isManuallySetValue, 0),\n            ]\n          ),\n        ],\n        [\n          stopClock(masterClock),\n          set(this.preventDecaying, 1),\n          set(\n            masterOffseted,\n            add(masterOffseted, sub(this.dragMasterY, prevMasterDrag))\n          ),\n          set(prevMasterDrag, this.dragMasterY),\n          set(wasRun, 0), // not sure about this move for cond-began\n          cond(\n            eq(this.panMasterState, GestureState.BEGAN),\n            stopClock(this.masterClockForOverscroll)\n          ),\n        ]\n      ),\n      cond(\n        greaterThan(masterOffseted, snapPoints[0]),\n        masterOffseted,\n        max(\n          multiply(\n            sub(\n              snapPoints[0],\n              sqrt(add(1, sub(snapPoints[0], masterOffseted)))\n            ),\n            !props.enabledInnerScrolling ? props.overdragResistanceFactor : 0\n          ),\n          masterOffseted\n        )\n      ),\n    ])\n\n    this.Y = this.withEnhancedLimits(\n      withDecaying(\n        withPreservingAdditiveOffset(this.dragY, this.panState),\n        this.panState,\n        this.decayClock,\n        this.velocity,\n        this.preventDecaying\n      ),\n      masterOffseted\n    )\n  }\n\n  private runSpring(\n    clock: Animated.Clock,\n    value: Animated.Value<number>,\n    velocity: Animated.Node<number>,\n    dest: Animated.Node<number>,\n    wasRun: Animated.Value<number>,\n    isManuallySet: Animated.Node<number> | number = 0\n  ) {\n    const state = {\n      finished: new Value(0),\n      velocity: new Value(0),\n      position: new Value(0),\n      time: new Value(0),\n    }\n\n    const config = {\n      damping,\n      mass,\n      stiffness,\n      overshootClamping,\n      restSpeedThreshold,\n      restDisplacementThreshold,\n      toValue: new Value(0),\n      ...this.props.springConfig,\n    }\n\n    return [\n      cond(clockRunning(clock), 0, [\n        set(state.finished, 0),\n        set(state.velocity, velocity),\n        set(state.position, value),\n        set(config.toValue, dest),\n        cond(and(wasRun, not(isManuallySet)), 0, startClock(clock)),\n        cond(defined(wasRun), set(wasRun, 1)),\n      ]),\n      spring(clock, state, config),\n      cond(state.finished, stopClock(clock)),\n      state.position,\n    ]\n  }\n\n  private handleMasterPan = event([\n    {\n      nativeEvent: {\n        translationY: this.dragMasterY,\n        state: this.panMasterState,\n        velocityY: this.masterVelocity,\n      },\n    },\n  ])\n\n  private handlePan = event([\n    {\n      nativeEvent: {\n        translationY: this.props.enabledInnerScrolling\n          ? this.dragY\n          : this.dragMasterY,\n        state: this.props.enabledInnerScrolling\n          ? this.panState\n          : this.panMasterState,\n        velocityY: this.props.enabledInnerScrolling\n          ? this.velocity\n          : this.masterVelocity,\n      },\n    },\n  ])\n\n  private handleTap = event([{ nativeEvent: { state: this.tapState } }])\n\n  private withEnhancedLimits(\n    val: Animated.Node<number>,\n    masterOffseted: Animated.Value<number>\n  ) {\n    const wasRunMaster = new Value(0)\n    const min = multiply(\n      -1,\n      add(this.state.heightOfContent, this.state.heightOfHeaderAnimated)\n    )\n    const prev = new Value(0)\n    const limitedVal = new Value(0)\n    const diffPres = new Value(0)\n    const flagWasRunSpring = new Value(0)\n    const justEndedIfEnded = new Value(1)\n    const wasEndedMasterAfterInner = new Value(1)\n    const prevMaster = new Value(1)\n    const prevState = new Value(0)\n    const rev = new Value(0)\n\n    return block([\n      set(rev, limitedVal),\n      cond(\n        or(\n          eq(this.panState, GestureState.BEGAN),\n          and(\n            eq(this.panState, GestureState.ACTIVE),\n            eq(prevState, GestureState.END)\n          )\n        ),\n        [\n          set(prev, val),\n          set(flagWasRunSpring, 0),\n          stopClock(this.masterClockForOverscroll),\n          set(wasRunMaster, 0),\n        ],\n        [\n          set(limitedVal, add(limitedVal, sub(val, prev))),\n          cond(lessThan(limitedVal, min), set(limitedVal, min)),\n        ]\n      ),\n      set(prevState, this.panState), //on iOS sometimes BEGAN event does not trigger\n      set(diffPres, sub(prev, val)),\n      set(prev, val),\n      cond(\n        or(greaterOrEq(limitedVal, 0), greaterThan(masterOffseted, 0)),\n        [\n          cond(\n            eq(this.panState, GestureState.ACTIVE),\n            set(masterOffseted, sub(masterOffseted, diffPres))\n          ),\n          cond(greaterThan(masterOffseted, 0), [set(limitedVal, 0)]),\n          cond(\n            not(eq(this.panState, GestureState.END)),\n            set(justEndedIfEnded, 1)\n          ),\n          cond(\n            or(\n              eq(this.panState, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.ACTIVE)\n            ),\n            set(wasEndedMasterAfterInner, 0)\n          ),\n          cond(\n            and(\n              eq(prevMaster, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.END),\n              eq(this.panState, GestureState.END)\n            ),\n            set(wasEndedMasterAfterInner, 1)\n          ),\n          set(prevMaster, this.panMasterState),\n          cond(\n            and(\n              eq(this.panState, GestureState.END),\n              not(wasEndedMasterAfterInner),\n              not(eq(this.panMasterState, GestureState.ACTIVE)),\n              not(eq(this.panMasterState, GestureState.BEGAN)),\n              or(clockRunning(this.masterClockForOverscroll), not(wasRunMaster))\n            ),\n            [\n              // cond(justEndedIfEnded, set(this.masterVelocity, diff(val))),\n              set(\n                this.masterVelocity,\n                cond(justEndedIfEnded, diff(val), this.velocity)\n              ),\n              set(\n                masterOffseted,\n                this.runSpring(\n                  this.masterClockForOverscroll,\n                  masterOffseted,\n                  diff(val),\n                  this.snapPoint,\n                  wasRunMaster\n                )\n              ),\n              set(this.masterVelocity, 0),\n            ]\n          ),\n          //   cond(eq(this.panState, State.END), set(wasEndedMasterAfterInner, 0)),\n          cond(eq(this.panState, GestureState.END), set(justEndedIfEnded, 0)),\n          set(this.preventDecaying, 1),\n          0,\n        ],\n        [set(this.preventDecaying, 0), limitedVal]\n      ),\n    ])\n  }\n\n  snapTo = (index: number) => {\n    if (!this.props.enabledImperativeSnapping) {\n      return\n    }\n    this.manuallySetValue.setValue(\n      // @ts-ignore\n      this.state.snapPoints[this.state.propsToNewIndices[index]]\n    )\n    this.isManuallySetValue.setValue(1)\n  }\n\n  private height: Animated.Value<number> = new Value(0)\n\n  private handleLayoutHeader = ({\n    nativeEvent: {\n      layout: { height: heightOfHeader },\n    },\n  }: LayoutChangeEvent) => {\n    this.state.heightOfHeaderAnimated.setValue(heightOfHeader)\n    this.setState({ heightOfHeader })\n  }\n\n  private handleFullHeader = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) => this.height.setValue(height)\n\n  private handleLayoutContent = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) =>\n    this.state.heightOfContent.setValue(height - this.state.initSnap)\n\n  static renumber = (str: string) =>\n    (Number(str.split('%')[0]) * screenHeight) / 100\n\n  static getDerivedStateFromProps(\n    props: Props,\n    state: State | undefined\n  ): State {\n    let snapPoints\n    const sortedPropsSnapPints: Array<{\n      val: number\n      ind: number\n    }> = props.snapPoints\n      .map(\n        (\n          s: number | string,\n          i: number\n        ): {\n          val: number\n          ind: number\n        } => {\n          if (typeof s === 'number') {\n            return { val: s, ind: i }\n          } else if (typeof s === 'string') {\n            return { val: BottomSheetBehavior.renumber(s), ind: i }\n          }\n\n          throw new Error(`Invalid type for value ${s}: ${typeof s}`)\n        }\n      )\n      .sort(({ val: a }, { val: b }) => b - a)\n    if (state && state.snapPoints) {\n      state.snapPoints.forEach((s, i) =>\n        s.setValue(sortedPropsSnapPints[0].val - sortedPropsSnapPints[i].val)\n      )\n      snapPoints = state.snapPoints\n    } else {\n      snapPoints = sortedPropsSnapPints.map(\n        p => new Value(sortedPropsSnapPints[0].val - p.val)\n      )\n    }\n\n    const propsToNewIndices: { [key: string]: number } = {}\n    sortedPropsSnapPints.forEach(({ ind }, i) => (propsToNewIndices[ind] = i))\n\n    const { initialSnap } = props\n\n    return {\n      init:\n        sortedPropsSnapPints[0].val -\n        sortedPropsSnapPints[propsToNewIndices[initialSnap]].val,\n      propsToNewIndices,\n      heightOfHeaderAnimated:\n        (state && state.heightOfHeaderAnimated) || new Value(0),\n      heightOfContent: (state && state.heightOfContent) || new Value(0),\n      initSnap: sortedPropsSnapPints[0].val,\n      snapPoints,\n      heightOfHeader: (state && state.heightOfHeader) || 0,\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Animated.View\n          style={{\n            height: '100%',\n            width: 0,\n            position: 'absolute',\n          }}\n          onLayout={this.handleFullHeader}\n        />\n        <Animated.View\n          style={{\n            width: '100%',\n            position: 'absolute',\n            zIndex: 100,\n            opacity: cond(this.height, 1, 0),\n            transform: [\n              {\n                translateY: this.translateMaster,\n              },\n              {\n                translateY: sub(this.height, this.state.initSnap) as any,\n              },\n            ],\n          }}\n        >\n          <PanGestureHandler\n            enabled={this.props.enabledGestureInteraction}\n            ref={this.master}\n            waitFor={this.panRef}\n            onGestureEvent={this.handleMasterPan}\n            onHandlerStateChange={this.handleMasterPan}\n            simultaneousHandlers={this.props.simultaneousHandlers}\n          >\n            <Animated.View\n              style={{\n                zIndex: 101,\n              }}\n              onLayout={this.handleLayoutHeader}\n            >\n              {this.props.renderHeader && this.props.renderHeader()}\n            </Animated.View>\n          </PanGestureHandler>\n          <View\n            style={\n              this.props.enabledInnerScrolling && {\n                height: this.state.initSnap - this.state.heightOfHeader,\n                overflow: 'hidden',\n              }\n            }\n          >\n            <PanGestureHandler\n              enabled={this.props.enabledGestureInteraction}\n              waitFor={this.master}\n              ref={this.panRef}\n              onGestureEvent={this.handlePan}\n              onHandlerStateChange={this.handlePan}\n              simultaneousHandlers={this.props.simultaneousHandlers}\n            >\n              <Animated.View>\n                <TapGestureHandler\n                  ref={this.tapRef}\n                  enabled={this.props.enabledGestureInteraction}\n                  onHandlerStateChange={this.handleTap}\n                  simultaneousHandlers={this.props.simultaneousHandlers}\n                >\n                  <Animated.View\n                    style={{\n                      width: '100%',\n                      transform: [{ translateY: this.Y as any }],\n                    }}\n                    onLayout={this.handleLayoutContent}\n                  >\n                    {this.props.renderContent && this.props.renderContent()}\n                  </Animated.View>\n                </TapGestureHandler>\n              </Animated.View>\n            </PanGestureHandler>\n            <Animated.Code\n              exec={onChange(\n                this.tapState,\n                cond(\n                  eq(this.tapState, GestureState.BEGAN),\n                  stopClock(this.decayClock)\n                )\n              )}\n            />\n            {this.props.callbackNode && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(\n                    this.props.callbackNode,\n                    divide(\n                      this.translateMaster,\n                      this.state.snapPoints[this.state.snapPoints.length - 1]\n                    )\n                  )\n                )}\n              />\n            )}\n            {this.props.contentPosition && (\n              <Animated.Code\n                exec={onChange(\n                  this.Y,\n                  set(this.props.contentPosition, sub(0, this.Y))\n                )}\n              />\n            )}\n            {this.props.headerPosition && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(this.props.headerPosition, this.translateMaster)\n                )}\n              />\n            )}\n          </View>\n        </Animated.View>\n      </React.Fragment>\n    )\n  }\n}\n"]}